!function(e,i){angular.module("ngCsv.config",[]).value("ngCsv.config",{debug:!0}).config(["$compileProvider",function(e){angular.isDefined(e.urlSanitizationWhitelist)?e.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/):e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)},]),angular.module("ngCsv.directives",["ngCsv.services"]),angular.module("ngCsv.services",[]),angular.module("ngCsv",["ngCsv.config","ngCsv.services","ngCsv.directives","ngSanitize",]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ngCsv"),angular.module("ngCsv.services").service("CSV",["$q",function(e){var i={"\\t":"	","\\b":"\b","\\v":"\v","\\f":"\f","\\r":"\r"};this.stringifyField=function(e,i){return"locale"===i.decimalSep&&this.isFloat(e)?e.toLocaleString():"."!==i.decimalSep&&this.isFloat(e)?e.toString().replace(".",i.decimalSep):"string"==typeof e?(e=e.replace(/"/g,'""'),(i.quoteStrings||e.indexOf(",")>-1||e.indexOf("\n")>-1||e.indexOf("\r")>-1)&&(e=i.txtDelim+e+i.txtDelim),e):"boolean"==typeof e?e?"TRUE":"FALSE":e},this.isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},this.stringify=function(i,t){var n=e.defer(),a=this,r="",l="",d=e.when(i).then(function(e){angular.isDefined(t.header)&&t.header&&(i=[],angular.forEach(t.header,function(e,i){this.push(a.stringifyField(e,t))},i),l+=(d=i.join(t.fieldSep?t.fieldSep:","))+"\r\n");var i,d,s,o,c=[];angular.isArray(e)?c=e:angular.isFunction(e)&&(c=e()),angular.isDefined(t.label)&&t.label&&"boolean"==typeof t.label&&(s=[],angular.forEach(c[0],function(e,i){this.push(a.stringifyField(i,t))},s),l+=(o=s.join(t.fieldSep?t.fieldSep:","))+"\r\n"),angular.forEach(c,function(e,i){var n,r,d=angular.copy(c[i]);r=[];var s=t.columnOrder?t.columnOrder:d;angular.forEach(s,function(e,i){var n=t.columnOrder?d[e]:e;this.push(a.stringifyField(n,t))},r),n=r.join(t.fieldSep?t.fieldSep:","),l+=i<c.length?n+"\r\n":n}),t.addByteOrderMarker&&(r+="\uFEFF"),r+=l,n.resolve(r)});return"function"==typeof d.catch&&d.catch(function(e){n.reject(e)}),n.promise},this.isSpecialChar=function(e){return void 0!==i[e]},this.getSpecialChar=function(e){return i[e]}},]),angular.module("ngCsv.directives").directive("ngCsv",["$log","$parse","$q","CSV","$document","$timeout",function(i,t,n,a,r,l){let d=!1;return{restrict:"AC",scope:{data:"&ngCsv",filename:"@filename",header:"&csvHeader",columnOrder:"&csvColumnOrder",txtDelim:"@textDelimiter",decimalSep:"@decimalSeparator",quoteStrings:"@quoteStrings",fieldSep:"@fieldSeparator",lazyLoad:"@lazyLoad",addByteOrderMarker:"@addBom",ngClick:"&",charset:"@charset",label:"&csvLabel"},controller:["$scope","$element","$attrs","$transclude",function(e,i,t,r){e.csv="",(!angular.isDefined(e.lazyLoad)||"true"!=e.lazyLoad)&&angular.isArray(e.data)&&e.$watch("data",function(i){e.buildCSV()},!0),e.getFilename=function(){return e.filename||"download.csv"},e.buildCSV=function(){var r,l=n.defer(),s=null;return i.addClass(t.ngCsvLoadingClass||"ng-csv-loading"),s=e.data(),angular.isFunction(s)&&(s=s()),!1===s&&(d=!0),a.stringify(s,(r={txtDelim:e.txtDelim?e.txtDelim:'"',decimalSep:e.decimalSep?e.decimalSep:".",quoteStrings:e.quoteStrings,addByteOrderMarker:e.addByteOrderMarker},angular.isDefined(t.csvHeader)&&(r.header=e.$eval(e.header)),angular.isDefined(t.csvColumnOrder)&&(r.columnOrder=e.$eval(e.columnOrder)),angular.isDefined(t.csvLabel)&&(r.label=e.$eval(e.label)),r.fieldSep=e.fieldSep?e.fieldSep:",",r.fieldSep=a.isSpecialChar(r.fieldSep)?a.getSpecialChar(r.fieldSep):r.fieldSep,r)).then(function(n){e.csv=n,i.removeClass(t.ngCsvLoadingClass||"ng-csv-loading"),l.resolve(n)}),e.$apply(),l.promise}},],link:function(t,n,a){n.bind("click",function(n){t.buildCSV().then(function(n){d?i.debug("Data was returned to ng-csv directive as a strict false value - skipping export."):function i(){var n=t.charset||"utf-8",a=new Blob([t.csv],{type:"text/csv;charset="+n+";"});if(e.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,t.getFilename());else{var d=angular.element('<div data-tap-disabled="true"><a></a></div>'),s=angular.element(d.children()[0]);s.attr("href",e.URL.createObjectURL(a)),s.attr("download",t.getFilename()),s.attr("target","_blank"),r.find("body").append(d),l(function(){s[0].click(),s.remove()},null)}}()}),t.$apply()})}}},])}(window,document);